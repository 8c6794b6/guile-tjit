dnl Process this file with autoconf to produce configure.
AC_INIT(Makefile.in)
. $srcdir/GUILE-VERSION
AM_INIT_AUTOMAKE($PACKAGE, $VERSION)

dnl FIXME: tsort, xargs not GNU standard.
all_subdirs=`cat $srcdir/*/PLUGIN/REQ $srcdir/*/PLUGIN/OPT /dev/null | tsort | xargs echo`
req_subdirs=`cat $srcdir/*/PLUGIN/REQ /dev/null | tsort | xargs echo`
opt_subdirs=`cat $srcdir/*/PLUGIN/OPT /dev/null | tsort | xargs echo`

AC_CONFIG_SUBDIRS($all_subdirs)
for d in $all_subdirs; do
  if test -d $srcdir/$d ; then
    existingdirs="$existingdirs $d"
    test -n "$silent" || echo Configuring plug-in component $d
  fi
done

for d in $req_subdirs; do
  test -d $srcdir/$d || {
     echo ERROR: Missing required package: $d 1>&2
     exit 1
  }
done

AC_SUBST(existingdirs)
AC_OUTPUT(Makefile doc/Makefile doc/guile-programmer/Makefile doc/guile-user/Makefile newdoc/Makefile newdoc/ref/Makefile newdoc/tutorial/Makefile)
