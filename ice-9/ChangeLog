1999-02-16  Maciej Stachowiak  <mstachow@alum.mit.edu>

	* optargs.scm (lambda*): Handle empty argument lists properly.

1999-02-15  Jim Blandy  <jimb@savonarola.red-bean.com>

	Fix from Russ McManus:
	* getopt-long.scm (parse-option-spec): Store 'optional as the
	value-required? field for options that take optional values.
	(process-short-option): Grab a value for the option when it takes
	either an optional or required value.

1999-02-12  Jim Blandy  <jimb@savonarola.red-bean.com>

	* getopt-long.scm: Remove debugging calls to `pk'.

	* getopt-long.scm: Return list of ordinary arguments as the value
	of the '() key, not `rest'.

	A new argument-processing package from Russ McManus.
	* getopt-long.scm: New file.
	* Makefile.am (ice9_sources): Added getopt-long.scm.
	* Makefile.in: Regenerated.

1999-02-09  Maciej Stachowiak  <mstachow@alum.mit.edu>

	* optargs.scm: New file. 
	* Makefile.am (ice9_sources): Add optargs.scm here. Makefile.in
 	not regenerated because I don't have the right version of Automake.

1999-02-06  Jim Blandy  <jimb@zwingli.cygnus.com>

	* and-let*.scm: New file, from Michael Livshin.
	* Makefile.am (ice9_sources): Add and-let* here.
	* Makefile.in: Regenerated.

1999-01-11  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* slib.scm (install-require-module): Fixed the kludge which loads
	the slib catalog: Doesn't anylonger assume that the feature tested
	for isn't loaded.

1998-12-14  Jim Blandy  <jimb@zwingli.cygnus.com>

	* Makefile.in: Regenerated.

1998-12-14  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (process-define-module): Reverted the change of
	1998-11-23 which caused loading of object code if :use-module was
	applied to the module itself.

1998-12-11  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* Makefile.am: Removed setf.scm.

	* setf.scm: Removed.  1. It was buggy.  2. It was unschemey.
	(These shortcomings were my fault.)

1998-12-10  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (environment-module): New procedure.

1998-12-07  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* Makefile.am: Added setf.scm.

1998-12-05  Christian Lynbech  <chl@tbit.dk>

	* setf.scm: New file.  Adds the new forms `setf!' and `setter'
	which implements generalized references a la Common LISP.

1998-12-02  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm (process-define-module): Added new specifier
	:autoload MODULENAME BINDINGS to the define-module form.
	The autoload specifier tells the module system to load the module
	MODULENAME at the first occasion that any variable with its name
	among BINDINGS is referenced.
	(make-autoload-interface): New procedure:  Constructs a stand-in
	for the public interface for the module to be autoloaded.

1998-12-01  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (*suppress-old-style-hook-warning*): Set this to #t
	if you don't want the old style hook warnings.

1998-12-01  Christian Lynbech  <chl@tbit.dk>

	* boot-9.scm (try-using-libtool-name): Fix check on dlname to make
	sure that it isn't empty, as it is when we are only buidling
	static libraries.

1998-11-27  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* session.scm (arity): New procedure.

1998-11-26  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm: Use run-hook instead of run-hooks everywhere.

1998-11-26  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm (run-hooks, add-hook!, remove-hook!): Added temporary
	code for backward compatibility until people have had time to
	adapt to the new hooks.

1998-11-23  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm (beautify-user-module!): Beautify also if public
	interface is set to the module itself.  In this way we can use
	beautify-user-module! to beautify a module prepared for object
	code.
	(process-define-module): Special case: Try to load object code as
	well if a module does :use-module on itself.

	* boot-9.scm: Bugfix: Since boot-9.scm is now loaded from
	invoke_main_func, we can no longer be sure that all modules have
	been registered when boot-9.scm is loaded.
	(register-modules): New function: Register and tag modules
	registered by scm_register_module_xxx since last call to this
	function.  Modules are tagged with the dynamic object passed as
	argument.  (Already linked modules should be tagged with #f.)
	(init-dynamic-module, link-dynamic-module): Call register-modules
	first to register linked modules.

	* boot-9.scm (init-dynamic-module): Remove module from
	registered-modules as soon as possible in case we are recursively
	invoked; Set public interface before doing the dynamic-call.
	
	* boot-9.scm (map-in-order): Removed (replaced by scm_serial_map).
	(abort-hook, before-error-hook, after-error-hook,
	before-backtrace-hook, after-backtrace-hook, before-read-hook,
	after-read-hook, exit-hook): Make hooks with `make-hook'.

	* boot-9.scm: Make hooks first class citizens and make them easier
	to use from C:
	(make-hook, add-hook!, remove-hook!, run-hooks): Moved to
	libguile/feature.c.

	* boot-9.scm: Added warnings about bindings used in
	libguile/modules.c: the-module, set-current-module,
	make-modules-in, beautify-user-module!, module-eval-closure.

1998-11-21  Mikael Djurfeldt  <mdj@kenneth>

	* boot-9.scm (the-environment): New special form: Returns an
	object representing the current local evaluation environment.
	This object can be used in `local-eval' and `defined?'.

1998-11-13  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm (collect): New syntax.  Similar to begin but returns
	a list of the results of all forms in the sequence instead of the
	result of the last form.

1998-11-10  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm (values, call-with-values): Moved here from
	syncase.scm.

	* syncase.scm (values, call-with-values): Moved to boot-9.scm.

	* boot-9.scm (readline-options, readline-enable, readline.disable,
	readline-set!: New options interface.

	* readline.scm (readline-port): Use readline-options-interface.

1998-11-05  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm: Set the repl start module in `top-repl' instead of
	at the end of boot-9.scm.

1998-11-01  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* emacs.scm (format): Bugfix: Handle multiple arguments
	correctly.  (Thanks to Thien-Thi Nguyen.)

1998-11-01  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm (exit-hook): New hook: Is run at the very end of an
	interactive session.
	(top-repl): Run exit-hook on exit.

	* readline.scm (readline-port): Maybe read history; Maybe write
	history at exit (add to exit-hook).

Fri Oct 30 15:15:37 1998  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* readline.scm (make-readline-port): Bugfixed last change...

1998-10-28  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* readline.scm (make-readline-port): Don't set prompt to "... " if
	read line was empty.

1998-10-19  Jim Blandy  <jimb@zwingli.cygnus.com>

	* boot-9.scm, debug.scm, expect.scm, hcons.scm, lineio.scm,
 	r4rs.scm, slib.scm, threads.scm: Update copyright years.

	* getopt-gnu-style.scm, slib.scm: Add copyright notice.

	Talked to Stallman.  Actually, the syntax-case copyright is no
	problem.  Duh.
	* Makefile.am (ice9_sources): Revert last change.
	* syncase.scm, psyntax.pp, psyntax.ss: Added again.
	* Makefile.in: Regeneretade.

	* boot-9.scm: Don't assume that this file is loaded just before
	entering a read-eval-print loop.  Turn code to load (ice-9 emacs)
	into...
	(load-emacs-interface): New function.
	(top-repl): Call it, if use-emacs-interface is defined and true.
	At this point, we *do* know we're about to enter a REPL.

	We can't include Kent Dybvig's syntax-case macro expander in the
 	core Guile distribution, because we don't have copyright
 	assignments for this code.  We can certainly distribute them as a
 	separate package, but Guile should be FSF code.
	* syncase.scm, psyntax.pp, psyntax.ss: Removed.
	* Makefile.am (ice9_sources): Removed syncase.scm, psyntax.pp, and
	psyntax.ss.
	* Makefile.in: Regenerated.

	* Makefile.am (ice9_sources): Add getopt-gnu-style.scm.
	* Makefile.in: Regenerated.

1998-10-18  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm: Added extended read syntax for byte vectors #y(...)
	and short vectors #h(...).

1998-10-14  Jim Blandy  <jimb@zwingli.cygnus.com>

	* calling.scm (excursion-function-syntax): Use a sequence of
	set!'s, not a single multi-variable set!; we removed support for
	that syntax a long time ago.  (Thanks to Shuji Narazaki.)

1998-10-12  Jim Blandy  <jimb@zwingli.cygnus.com>

	* r4rs.scm (OPEN_READ, OPEN_WRITE, OPEN_BOTH): Don't bother
	testing software-type here.  That's the least of our Windows
	porting issues, and it's done wrong anyway.

1998-10-09  Jim Blandy  <jimb@zwingli.cygnus.com>

	* boot-9.scm (read-path-list-notation-warning): New function:
	print a warning the first time we see `#/' notation.

	* q.scm (sync-q!, q?, q-remove!, q-push!, enq!): Lots of bugs, and
 	(eq?  #f '()) assumptions.  Make functions that aren't documented
 	to return anything else return the queue itself.  (Bug report from
 	Michael Livshin --- thanks!)

1998-08-21  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* debug.scm (trace-entry, trace-exit): Removed re-enabling of
	trace flag.

	* boot-9.scm (make-options): Bugfix: Changed pair? --> list? in
	order to allow the empty list as arg.
	(error-catching-loop): Use `with-traps' to create a dynamic
	context with traps enabled.

1998-08-19  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm: Removed (ice-9 regex) from use-list of (guile)
	module.
	(try-using-libtool-name): Removed dependency on (ice-9 regex).

1998-08-15  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm: Make the root module use (ice-9 regex) if
	available.  The dynamic linking facilities in boot-9.scm are
	currently dependent upon regular expressions.  My change of
	1998-07-14 removed (ice-9 regex) from the use-list of the root
	module and thereby destroyed dynamic linking.

1998-07-29  Jim Blandy  <jimb@zwingli.cygnus.com>

	* Makefile.in: Regenerated using the last public version of
	automake, not the hacked Cygnus version.

1998-07-28  Jim Blandy  <jimb@zwingli.cygnus.com>

	* Makefile.in: Regenerated, after removing Totoro kludge.

1998-07-28  Jim Blandy  <jimb@totoro.red-bean.com>

	* getopt-gnu-style.scm: New file.  (Thanks to Russ McManus.)

1998-07-26  Jim Blandy  <jimb@zwingli.cygnus.com>

	* Makefile.in Rebuilt, for config changes in parent dir.

1998-07-21  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* readline.scm (make-readline-port): Set prompt string to "... "
	after first read line.  (Thanks to Richard Polton.)

1998-07-19  Jim Blandy  <jimb@zwingli.cygnus.com>

	* lineio.scm (make-line-buffering-input-port): Don't use
	ungetc-char-ready?, since we don't provide that function any
	more.  The unread-string function doesn't interact properly with
	any of the standard I/O functions anyway.  (Thanks to Andrew
	Archibald.)

	* hcons.scm (hashq-cons-assoc): Don't assume the empty list is
	false.  Return false when we cannot find a matching entry in the
	list.  (Thanks to Andrew Archibald.)

1998-07-16  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm (export, export-syntax): New special forms: Export
	bindings from a module.  `(export name1 name2 ...)' can be used at
	the top of a module (after `define-module') to specify which names
	should be exported.  It can be used as an alternative to
	`define-public'.  `export-syntax' works equivalently to `export'
	but is intended for export of syntactic keywords.
	(Thanks to Thien-Thi Nguyen.)

1998-07-15  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm: Renamed module `(guile-repl)' --> `(guile-user)'.

1998-07-14  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm: Let the user start in module `(guile-repl)' instead
	of module `(guile)'.  Also make sure that `(guile-repl)' uses
	suitable modules.  This change improves Guile stability
	substantially since bindings will only be copied from the root
	module: If the user redefines builtins in `(guile-repl)' it won't
	affect the internal operation of Guile itself.

1998-06-19  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* boot-9.scm (load-module): When loading files from within files
	themselves being loaded: Use the directory path of the file being
	loaded as root for relative filenames.  (After suggestion by
	Steven G. Johnson.)

1998-06-15  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* emacs.scm (emacs-load): New feature: Eval in specified module.

1998-06-14  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* readline.scm: Typo in regex module name.

1998-06-13  Mikael Djurfeldt  <mdj@barbara.nada.kth.se>

	* readline.scm (apropos-completion-function): regexp-quote text to
	be completed.

1998-06-11  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* debug.scm, emacs.scm: Bugfix: Treat `the-last-stack' as a fluid.

1998-06-09  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm: Check that (current-input-port) is a tty before
	enabling readline.  (Thanks to Michael N. Livshin.)

1998-06-07  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (use-syntax): Turned into a macro inorder to be
	similar in use to `use-modules'.
	Example: (use-syntax (ice-9 syncase)) will 1. load the module
	(ice-9 syncase), and, 2. install the procedure `syncase' as eval
	transformer.
	(internal-use-syntax): New procedure.
	(process-define-module): Use `internal-use-syntax'.

1998-05-19  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* Makefile.am (ice9_sources): Add emacs.scm.

1998-05-13  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* readline.scm: Use the new readline facilities: Add the
	possibility to control input and output ports; Add apropos
	completion.

	* boot-9.scm: Antirevert Jim's readline code which he reverted
	19971027 and adapt it to the current readline interface.
	
	* boot-9.scm (top-repl): Only enable readline if not using the
	Emacs interface; Only use repl prompt when using the readline port
	from repl-read.  (We don't want to see it when calling `read'.)

	* boot-9.scm (remove-hook!): Parenthesis bug.

1998-05-11  Mikael Djurfeldt  <mdj@kenneth>

	* boot-9.scm: Load readline module if readline is present.

	* readline.scm (apropos-completion-function): New procedure:
	Symbolic completion.  (Thanks to Andrew Archibald!)

1998-04-22  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (process-define-module): Added keyword use-syntax.

1998-04-19  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* nonblocking.scm: Removed.  libguile is now inherently
	nonblocking through the use of scm_internal_select.
	
	* emacs.scm: Removed use of nonblocking.scm.

	* gwish.scm, gtcl.scm: Removed.  tcltk.scm has made these
	obsolete.
	
1998-04-15  Mikael Djurfeldt  <mdj@nada.kth.se>

	* runq.scm (runq-control): Corrected spelling of enqueue!.
	(Thanks to Karl M. Hegbloom.)

1998-03-30  Mikael Djurfeldt  <mdj@nada.kth.se>

	* boot-9.scm: Added new run-time option interface eval-options.

1998-03-28  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (remove-hook!): New macro.  (Thanks to Maciej
	Stachowiak.)

1998-01-30  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* threads.scm: Added simple error and signal handler.
	(make-thread, begin-handler): Use this handler.  The most
	important effect of this is that signals get unmasked.
	Previously, when a signal was thrown signals remained masked
	(signals get masked when a signal is taken) which influenced other
	threads.

1998-01-01  Tim Pierce  <twp@skepsis.com>

	A better fix to the SLIB identity problem -- thanks to Marius Vollmer.
	* slib.scm (identity): Unmake public.
	(slib:eval): Evaluate inside `slib-module'.

1997-12-24  Tim Pierce  <twp@skepsis.com>

	* boot-9.scm: Doc fix.

	* slib.scm (identity): Made public.
	(home-vicinity): New function (from SLIB/Template.scm).

1997-12-13  Tim Pierce  <twp@skepsis.com>

	* boot-9.scm (read-line): Rewritten to call %read-line for
	improved speed.  Minor user-visible changes: the new functions are
	hardwired to treat the LFD character as signifying end-of-line, so
	changing `scm-line-incrementors' will no longer affect the
	behavior of read-line.  On platforms which do not represent
	end-of-line with a LFD character, read-line should behave more
	like native line-processing facilities, but there is still a ways
	to go here.

Sat Nov 29 01:24:46 1997  Mikael Djurfeldt  <mdj@kenneth>

	* boot-9.scm (error-catching-loop, save-stack): `the-last-stack'
	is now a fluid.

1997-11-28  Tim Pierce  <twp@skepsis.com>

	* boot-9.scm (find-and-link-dynamic-module): If a module directory
	contains a .la file (a libtool support file), attempt to extract
	the shared library name from that file.  If the .la file does not
	exist, try to link against a .so file.  Libtool-generated compiled
	modules should load more cleanly in Guile now.
	(try-using-libtool-name, try-using-sharlib-name): New functions.

Sun Nov  9 06:10:59 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (set-batch-mode?!, batch-mode?): initialize more
	usefully so they will work from a script.

1997-10-31  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (inherit-print-state): Moved definition to the
	neighborhood of the record code.

Mon Oct 27 02:05:49 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	* boot-9.scm: Revert changes to this file from Oct 23.  It turns
 	out to interact badly with the Emacs support and the Tcl/Tk
 	support.  It's not a high enough priority at the moment to be
 	worth fixing.  I'm leaving the other readline support in, though.

Sat Oct 25 14:23:22 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	* Makefile.am: Include readline.scm in the list of files to be
	installed, so Guile can find it for interactive use.
	* Makefile.in: Regenerated.

Thu Oct 23 01:00:33 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	Add support for readline function.
	* readline.scm: New module.
	* boot-9.scm (repl-reader): New function.
	(scm-style-repl): Call repl-reader, instead of doing the reading
	ourselves.  Remove repl-report-reset; it was never used for
	anything.
	(top-repl): If we've got the readline primitives, then redefine
	repl-reader to use them.
	If we've got the readline primitives, import the readline module.

	* ls.scm (ls, lls): Don't assume (eq? #f '()).

Wed Oct 22 18:26:57 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	* calling.scm, common-list.scm, ls.scm, q.scm, runq.scm,
	string-fun.scm: Added copyright notices; reformatted.

Thu Oct  9 05:44:00 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* expect.scm: (expect-regexec): new procedure, use it in
	expect-strings to fix the => syntax under the new regex system.
	(top): include regex module in define-module statement.

Wed Oct  8 03:16:01 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* (error-catching-loop): new local variable "interactive".  if
	#f, abort terminates the process.
	(set-batch-mode?!, batch-mode?): new closures, defined in 
	error-catching-loop.  the names are from scsh.

1997-10-06  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (inherit-print-state): If NEW-PORT contains a
	print-state, throw it away.

Fri Oct  3 12:00:00  Mikael Djurfeldt  <mdj@nada.kth.se>

	* boot-9.scm (struct-layout): Use `vtable-index-layout' instead of
	`0'.

Thu Oct  2 12:00:00  Mikael Djurfeldt  <mdj@nada.kth.se>

	* boot-9.scm (struct-printer, make-struct-printer,
	set-struct-printer-in-vtable!, *struct-printer*): Removed.
	(record-type-vtable, make-record-type): Don't use make-struct-printer.
	(record-type-vtable): User fields "prpr" (printer is no longer a
	user field).
	(record-type-name, record-type-fields): Decreased slot index by
	one; Use `vtable-offset-user'.

Thu Oct  2 12:00:00  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (inherit-print-state): New experimental function.

Tue Sep 30 13:12:48 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	Suggestion and script from Maciej Stachowiak:
	* boot-9.scm: Split off modules into separate, autoloadable files.
	This reduces startup time from 10.5s to 5.5s (user cpu).
	* calling.scm, common-list.scm, ls.scm, q.scm, runq.scm,
 	string-fun.scm: New files, containing stuff that used to be in
	boot-9.scm.
	* Makefile.am (ice9_sources): List new files here, for
	distribution and installation.
	* Makefile.in: Regenerated.

Mon Sep 29 23:53:55 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	* Makefile.in: Regenerated with automake 1.2c.

Mon Sep 29 03:21:24 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* slib.scm (slib:load): slib:load first tries to load the file
	named NAME, then NAME.scm.  On error, report the error occuring at
	the first attempt (NAME) rather than the second (NAME.scm).

	* boot-9.scm: Bugfix: Hard-solder the print-option procedure into
 	the make-options macro so that we needn't refer to a global
	symbol.

Sun Sep 28 21:40:24 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* debug.scm: Moved options interface procedures to boot-9.scm.

	* boot-9.scm: Define options interface procedures here instead.

Sat Sep 27 20:19:20 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	* boot-9.scm (separate-fields-discarding-char,
	separate-fields-after-char, separate-fields-before-char): Call
	continuation function, RET, as advertised: with each separated
	field a separate argument.

	* Makefile.in: Regenerated with automake 1.2a.

Sat Sep 20 14:23:53 1997  Mikael Djurfeldt  <mdj@kenneth>

	* slib.scm (slib:load): Export.

	* boot-9.scm (in-vicinity): Bugfix: Don't add "/" to an empty
	vicinity;
	Provide defmacro.

Thu Sep 18 01:24:31 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* r4rs.scm (apply): Set name property to 'apply.

Tue Sep 16 22:09:50 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (keyword->symbol, display-usage-report): Changed
 	length --> string-length.  (Thanks to Aleksandar Bakic.)
	(separate-fields-discarding-char, separate-fields-after-char,
 	separate-fields-before-char): Bugfix from Maciej Stachowiak
	<mstachow@mit.edu>.  Thanks!
	(try-module-linked): Try to find module among those already
	registered.
	(try-module-dynamic-link): Removed the first test which
	corresponds to a call to `try-module-linked'.
	(resolve-module): Resolve modules in this order: 1. Already
	registered modules (for example those which have been statically
	linked), 2. Try to autoload an .scm-file, 3. Try to dynamically
	link a .so-file.

Mon Sep 15 23:39:54 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (iota): Renamed list-reverse! --> reverse!

Thu Sep 11 02:31:38 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* session.scm (name): New procedure: Gives name of object.
	(source): New procedure: Gives source of object.

Wed Sep 10 20:12:45 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (primitive-macro?): New procedure.

	* slib.scm: Added hack which transfers syntactic information from
	the builtin variable `define' to the slib version if module (ice-9
	syncase) has been loaded.  This is necessary to get correct
	expansion inside the slib module.

	* psyntax.ss (build-let, build-named-let): New output
 	constructors.
	(build-lexical-var): Seed gensym with symbolic name.
	(self-evaluating?): Add keywords among self-evaluating types.
	(let): New core form.
	(if): Removed from core language.
	(or, and, let, cond): Removed syntactic definitions.
	(sc-expand3): New procedure: Expander which takes optional mode
 	and eval-syntactic-expanders-when arguments.

	* syncase.scm (psyncomp): New procedure: Recompiles psyntax.pp.
	Should be used inside the (ice-9 syncase) module with (use-syntax
	syncase) and with the current directory containing the psyntax.ss
	source.
	Added hack to transfer syntactic information from the builtin
	variable `define' to the slib version if module (ice-9 slib) has
	been loaded.
	
Fri Sep  5 05:47:36 1997  Mikael Djurfeldt  <mdj@faun.nada.kth.se>

	* syncase.scm (sc-interface, sc-expand): Removed hook setup.
	(syncase): Publish syntax transformer to be used with
	`use-syntax'.
	(sc-macro): Use this as the value when publishing macros.

	* boot-9.scm (module-type): Added `transformer'.
	(make-module): Modified initialization.
	(module-transformer, set-module-transformer!): Selector and
 	mutator for module-associated transformer.
	(set-current-module): Use module-transformer to set
 	`scm:eval-transformer'.
	(module-use!): Previous change reverted.
	(use-syntax): New function: Install a transformer in current
 	module.
	(sc-interface, sc-expand): Removed! :)

Fri Sep  5 03:09:09 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* emacs.scm (emacs-load): Added new parameter `module'.

	* syncase.scm (putprop, getprop): Modified to use the object
 	properties of the variable object corresponding to the symbol;
  	This way we can ride on the mechanisms of the module system.
	Changed `builtin-variable' calls to `define-public' calls.
	Setup the hooks sc-expand and sc-interface.

	* boot-9.scm (sc-interface, sc-expand): New builtin variables.
	(set-current-module): Switch to and from sc-expand as
	scm:eval-transformer when going into and out of modules using
	syncase macros.
	(module-use!): Set scm:eval-transformer to sc-expand when adding
	the syncase interface.

Thu Sep  4 14:57:04 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* syncase.scm (putprop): Temporary fix which publishes new syntax
	globally (the old behaviour was complex and connected to the inner
	workings of the current module system).

Wed Sep  3 21:29:13 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* psyntax.ss: Updated.
	psyntax.pp: Bugfix: Previous version had some leading "t":s cut
	off!

Tue Sep  2 00:26:42 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (gensym): Removed (replaced by primitive).
	(obarray-gensym): Rewritten to use `gensym'.
	(gentemp): Rewritten to use `gensym'.

Mon Sep  1 20:08:32 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* gtcl.scm (make-tcl-binder): Rewritten to choose bindings
	according to the following priorities:
	1. tcl bindings which are present in override-scheme-list
	2. bindings from the-scm-module
	3. tcl bindings
	This way the gtcl module can occur first in the use-list without
	disabling the scheme interpreter.
	(new-interpreter): New function.

	* gwish.scm: Moved initialization code for the-interpreter to
 	gtcl.scm; Moved name space cleaning code to gtcl.scm and rewrote
 	it; Call `new-interpreter'; Don't :use-module (guile).

Thu Aug 28 23:48:53 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	* Makefile.in: Regenerated.

Wed Aug 27 11:35:09 1997  Jim Blandy  <jimb@totoro.red-bean.com>

	* Makefile.in: Regenerated, so it uses "tar", not "gtar".

Mon Aug 25 22:00:44 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* emacs.scm (object->string, format, error-args->string): New
	procedures.
	(emacs-frame-eval): Reworked.

Mon Aug 25 16:15:55 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* session.scm (apropos-internal): Musn't initialize symbol
	accumulator with a constant pair.  That led to mutation of the
	source!

Sun Aug 24 01:03:10 1997  Mikael Djurfeldt  <mdj@kenneth>

	* session.scm (vector-for-each): Removed.
	(apropos): vector-for-each --> array-for-each.
	(apropos-internal): New function.  Return list of accessible
	symbols matching regexp.

	* debug.scm (frame-number->index): New function.  Convert frame
	number (as displayed in the backtrace) to frame index (to be used
	in stack-ref).

	* emacs.scm (emacs-load): New arguments: interactivep: when
 	non-false, send back results to Emacs; colnum: Column number;
	Use modules (ice-9 debug) and (ice-9 session);
	(no-stack, no-source): New simple-actions;
	(result-to-emacs): New procedure. Sends data to Emacs via the
	result protocol;
	(get-frame-source, emacs-select-frame, emacs-frame-eval,
	emacs-symdoc): New procedures.

Wed Aug 20 13:21:11 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* emacs.scm (emacs-load): Adjust stack narrowing.
	(whitespace-chars): Include #\np.

	* syncase.scm: Also turn off debugging evaluator and recording of
	procedure names during loading of psyntax.pp.

	* psyntax.pp: Removed leading blanks => 800K -> 100K.

Tue Aug 19 02:39:41 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* syncase.scm: Don't tamper with debug mode setting when enabling
	macros.  Instead cut the stack with start-stack.
	Load psyntax.pp with recording of positions turned off.

	* psyntax.pp, psyntax.ss (quasiquote): Changed fx= --> =.

	* syncase.scm: New file: Guile-adaption for syntax-case macros.
  	* psyntax.pp, psyntax.ss: Syntax-case macros, portable version 2 by
 	R. Kent Dybvig, Oscar Waddell, Bob Hieb and Carl Bruggeman

Mon Aug 18 21:58:25 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* session.scm: New file: Session support.
	(apropos): New procedure: List bindings given regexp.

Sat Aug 16 18:44:24 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm: define tms accessors: clock, utime, stime, cutime,
	cstime.

Thu Aug 14 19:55:37 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* emacs.scm (emacs-load): Something has changed in the reader so
	that we now should set the port line count to the specified value
	(linum) instead of (- linum 1).

	* slib.scm (slib:load): Use load-from-path instead of
 	primitive-load-path so that backtraces get narrowed properly at
 	the top.

	* boot-9.scm (top-repl): Save stack already in signal handler in
	order to narrow it correctly.
	(save-stack): Adjust narrowing tag for the top of load-stacks.

Tue Jul 29 01:18:08 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (move->fdes, dup->port): use dup->fdes, not primitive-dup.
	(dup->fdes): deleted, now done in C.

Sat Jul 26 08:00:42 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (setenv): new procedure, scsh compatible.

Sat Jul 26 21:30:10 1997  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (with-fluids): New macro to go with the
 	builtin `with-fluids*'.

Thu Jul 24 04:28:11 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* slib.scm (install-require-module): In newer versions of slib
	*catalog* is #f until the first access.  Therefore we call
	require:provided? for a random feature if *catalog* is #f.

Wed Jul 23 20:13:04 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm: If using emacs interface, enable backtraces
	automatically.

Mon Jul 21 06:45:45 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (dup->port, dup->inport, dup->outport, dup->fdes,
	dup, fdes->inport, fdes->outport, port->fdes): new procedures.
	(duplicate-port): was a C primitive, now it's here.
	(move->fdes): allow the first argument to be a file descriptor.
	Return the modified port or file descriptor (was unspecified.)

Fri Jul 11 00:13:43 1997  Jim Blandy  <jimb@floss.red-bean.com>

	Changes to compile under gnu-win32, from Marcus Daniels:
	* boot-9.scm (load-user-init): If HOME is unset, provide
	a default of /.

	* boot-9.scm (define-public): Changed to accomodate Hobbit.

Tue Jun 24 00:31:47 1997  Jim Blandy  <jimb@floss.red-bean.com>

	* boot-9.scm, debug.scm, hcons.scm, lineio.scm, mapping.scm,
 	poe.scm, slib.scm, tags.scm, threads.scm: Use normal list
	notation, instead of #/ notation.

	* expect.scm (expect-strings): Pass regexp/newline flag to
	make-regexp.

Mon Jun 23 16:13:38 1997  Jim Blandy  <jimb@floss.red-bean.com>

	Fix inconsistencies in parsing of #/ style lists.
	* boot-9.scm (read-path-list-notation): New function.
	(parse-path-symbol): Deleted.  Replaced by above.
	Plug in read-path-list-notation as the parser for #/ lists,
	instead of the anonymous lambda form calling parse-path-symbol.
	(Thanks to Maurizio Vitale.)
	
	* boot-9.scm (make-list): Remove the definition of this function
	from the (ice-9 common-list) module; make the `init' argument
	optional in the	scm module's definition, to match the deleted
	definition.  Harmony reigneth?  (Thanks to Bernard URBAN.)

Sun Jun 22 18:33:17 1997  Jim Blandy  <jimb@floss.red-bean.com>

	Try to detect when people are using one version of libguile and a
	different version of ice-9.  People have been skewing things and
	sending in bug reports.
	* version.scm.in: New file, which the configure script munges to
	produce version.scm, which contains the ice-9 config stamp.
	* boot-9.scm: Compare the libguile and ice-9 config stamps;
	display a warning if the two are different.
	* Makefile.am: Install version.scm, but don't distribute it.
	Distribute version.scm.in, but don't install it.
	* Makefile.in: Regenerated.

Thu Jun 19 21:01:16 1997  Jim Blandy  <jimb@floss.red-bean.com>

	* slib.scm (slib:warn): Alias for WARN function.

Fri Jun 13 00:32:04 1997  Jim Blandy  <jimb@floss.red-bean.com>

	* boot-9.scm (struct-printer): Fix off-by-one error in range
	check.  Correctly check for struct printer tag.

	* expect.scm: Turn this into a module, (ice-9 expect).
	(expect-port, expect-timeout, expect-timeout-proc,
 	expect-eof-proc, expect-char-proc, expect, expect-strings,
 	expect-select): Make these public definitions.
	(expect-strings): Use make-regexp and regexp-exec, instead of
	regcomp and regexec.  We've omitted the REG_NEWLINE flag; hope
	that's okay.

	* boot-9.scm (with-regexp-parts): Comment this out.  It has no
 	users in the core, and relies on mildly hairy details of the old
 	regexp interface.

	* test.scm: Re-enable tests asserting that '() is true, and not a
	boolean.  This stuff has been true for a while.

	* boot-9.scm (ipow-by-squaring, butlast): Fix uses of outdated
 	function names.

	* boot-9.scm (with-excursion-getter-and-setter, q-rear): Doc
	fixes.

Wed Jun 11 00:31:40 1997  Jim Blandy  <jimb@floss.red-bean.com>

	* Makefile.in: Regenerated after xtra_PLUGIN_guile_libs change in
	../configure.in.

Fri Jun  6 14:37:18 1997  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (struct-printer): Bugfix: Check the layout of the
 	vtable and not the one of the struct.

Wed Jun  4 23:27:16 1997  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (struct-layout, %struct-printer-tag, struct-printer,
 	make-struct-printer, set-struct-printer-in-vtable!): New bindings
 	to support printing of structures.
        (record-type-vtable, make-record-type): Add slot to hold printing
 	function and initialize it with something appropriate.  Removed
 	commented out printing code.
	(record-type-name, record-type-fields): Adjusted slot offsets.
	(%print-module): Reduce argument list to "mod" and "port".
	
Tue Jun  3 17:04:18 1997  Jim Blandy  <jimb@totoro.cyclic.com>

	* slib.scm (identity): New function, used by SLIB.

Sat May 31 18:57:12 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm: signal-handler, alarm-thunk: removed.
	don't define ticks-interrupt etc.
	top-repl: install signal handlers for SIGINT, SIGFPE, SIGSEGV, SIGBUS
	during call to scm-style-repl.
	
Fri May 30 18:08:10 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* slib.scm (slib:load): Use primitive-load-path instead of
	basic-load.  This is probably wrong, but hopefully the entire
	source access system will be revised soon anyway, and this will
	make require behave more like Emacs Lisp's require.  If this
	breaks something, please let me know.  Maybe this is real dumb.

Thu May 29 02:36:48 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* regex.scm: Add a module declaration.  Use DEFINE-PUBLIC everywhere.
	* boot-9.scm: If the `regex' feature is present, use the module
	(ice-9 regex).

Tue May 27 22:48:14 1997  Tim Pierce  <twp@twp.tezcat.com>

	* regex.scm: New file.
	* Makefile.am (subpkgdata_DATA): Add regex.scm.
	* Makefile.in: Regenerated.

Mon May 26 17:24:48 1997  Jim Blandy  <jimb@totoro.cyclic.com>

	* COPYING, boot-9.scm, debug.scm, emacs.scm, expect.scm, gtcl.scm,
 	gwish.scm, hcons.scm, lineio.scm, mapping.scm, nonblocking.scm,
 	oldprint.scm, poe.scm, r4rs.scm, source.scm, tags.scm, test.scm,
 	threads.scm: New address for FSF.

Fri May 16 04:09:45 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* debug.scm: Update copyright years; this file has been worked on
 	in 1997.

Thu May 15 07:56:08 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* expect.scm: use gettimeofday instead of get-internal-real-time
	and use a floating point timeout when calling select.  Untested,
	since the regex library is currently AWOL.

Wed May 14 21:00:30 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm (eval-string): Function deleted; it was already
	implemented in C, so there's no point in making a divergable copy
	here.

Tue May 13 16:40:06 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* Makefile.in: Regenerated, using automake-1.1p.

Tue May 13 16:40:06 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* Makefile.in: Regenerated, using automake-1.1p.

Tue May 13 02:48:49 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (error-catching-loop): don't read a line from
	current input when quit is encountered, the previous change
	fixes this too.

Mon May 12 19:00:21 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm (scm-style-repl): After reading an expression,
	consume any trailing newline (perhaps preceded by whitespace), to
	avoid screwing up GDB.  More detail in comments.

Mon May  5 13:18:38 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* Makefile.am (ETAGS_ARGS): New variable, since we're not treating
	the Scheme code like code yet.
	* Makefile.in: Resrac,husrched.

Wed Apr 30 15:25:15 1997  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (link-dynamic-module): Do not catch errors from
 	dynamic-link and dynamic-call.  When the shared library exists it
 	is now assumed to be suitable for a dynamic C module.
	
Fri Apr 25 21:21:35 1997  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (process-use-modules): New function to support the
 	use-modules macro
	(use-modules): throw an error iff one of the requested modules
	can't be found.
	
Tue Apr 29 06:54:46 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm: don't define timer-thunk or gc-thunk.

Sun Apr 27 17:56:09 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* aclocal.m4: Removed; unnecessary, given changes of Apr 24.

	* Makefile.am (subpkgdatadir): Use "ice-9" instead of "@module@";
	we're not using AM_INIT_GUILE_MODULE any more.
	* Makefile.in: Regeneratitetedrerd.

Thu Apr 24 01:33:33 1997  Jim Blandy  <jimb@floss.cyclic.com>

	Get 'make dist' to work again.
	* Makefile.am (EXTRA_DIST): Remove PLUGIN files.
	* Makefile.in: Regenerated, like two tons of fleas.

	Changes for reduced Guile distribution: one configure script,
	no plugins.
	* configure.in, configure: Removed.
	* Makefile.in: Regenerated.

Sat Apr 19 08:03:50 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm (eval-string, command-line, load-user-init): New
	functions.

Sat Apr 12 08:27:05 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (log10): defined.

Tue Apr  1 17:46:49 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* expect.scm (expect-select): correct the millisecond timeout
	arithmetic (from Marko.Kohtala@ntc.nokia.com).
	
Mon Mar 31 03:23:19 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (open-input-pipe, open-output-pipe): defined here
	instead of in libguile.
	(tm:sec etc.) new accessors for broken-down time.
	(set-tm:sec etc.) new setters for broken-down time.

Thu Mar 27 05:06:00 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (netent:addrtype, servent:port): added missing
	procedures.
	(netent:net, servent:proto): repaired.
	(utsname:sysname etc.): new accessors for uname.

Tue Mar 25 03:04:03 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (sockaddr:fam, sockaddr:path, sockaddr:addr,
	sockaddr:port): new functions.

Wed Mar 19 04:50:34 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm: define accessor procedures for the objects returned
	by getpw, getgr, gethost, getnet, getproto, getserv (e.g.,
	passwd:name, where the first component is the name of the C structure
 	and the second is the unprefixed C member name.)

Tue Mar 18 18:39:31 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (setpwent, setgrent, sethostent, setnetent, setprotoent,
	setservent): no longer take an argument, it was bogus.

Thu Mar 13 00:13:41 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (scm-error): deleted, reimplemented in C.

Mon Mar 10 15:48:31 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (process-define-module): Modified to handle both
	keywords and symbols.

Sat Mar  8 04:32:44 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* slib.scm: update read usage.

	* r4rs.scm: update primitive-load usage.
	Don't define read-sharp.

	* boot-9.scm: use read-hash-extend to install extra read syntax.
	(read-sharp): removed.
	Adjust usage of primitive-load-path, read, which no longer take
	case_i or read-sharp arguments.

Sat Mar  8 00:07:54 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm: Added loading of session support module.

	* debug.scm: Removed `display-application'.  (Replaced by
 	primitive procedure.)

	* boot-9.scm (beautify-user-module!): Don't add the root module
	interface to the end of the use-list of the root module.

Thu Mar  6 07:26:34 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm: repl-quit, repl-abort: obsolete variables deleted.

Wed Mar  5 20:30:24 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm: check use-emacs-interface for emacs support.

Sun Mar  2 19:47:14 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (scm-style-repl): call repl-report-start-timing if
	read gets EOF.
	* (exit): alias for quit.

Sun Mar  2 05:25:11 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (error-catching-loop thunk): use a status variable to
	return the quit args.
	(scm-style-repl): call -quit, passing return value from
	error-catching-repl.  Make -quit return its args.
	stand-alone-repl: comment out, since it seems unused.

	(error-catching-loop thunk): discard trailing junk after a (quit).

Sat Mar  1 15:24:39 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm: Removed the old printer code.

	* r4rs.scm (apply, call-with-current-continuation): Added comment
	explaining why apply and call/cc need to be closures.

	* boot-9.scm (apply, call-with-current-continuation): Bugfix:
	Removed. These definitions are already present in r4rs.scm.

	* debug.scm (trace-entry, trace-exit): Check that we're on a repl
 	stack before printing traced frames; Re-enable trace flag at end
 	of handlers.

Sat Mar  1 00:10:38 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* debug.scm: Add hook for reset of trace level at abort.

	* boot-9.scm (run-hooks): New procedure.
	(add-hooks!): New macro.
	Change hooks to use these functions.

	* debug.scm: *Warning* This feature is a bit premature.  I add
 	it anyway because 1. it is very useful, and, 2. you can start
	making it less premature by complaining to me and by modifying
	the source! :-)
	(trace): Given one or more procedure objects, trace each one.
  	Given no arguments, show all traced procedures.
	(untrace): Given one or more procedure objects, untrace each one.
  	Given no arguments, untrace all traced procedures.  The tracing in
 	Guile have an advantage to most other systems: We don't create new
 	procedure objects, but mark the procedure objects themselves.
  	This means that also anonymous and internal procedures can be
 	traced.

	* boot-9.scm (error-catching-loop): Added handling of apply-frame
	and exit-frame exceptions.
	
	* boot-9.scm (assert-repl-prompt, the-prompt-string): Removed.
	(set-repl-prompt!): Setter for repl prompt.
	(scm-style-repl): If prompt is #f, don't prompt; if prompt is a
 	string, display it; if prompt is a thunk, call it and display its
 	result; otherwise display "> ".
  	(Change suggested by Roland Orre <orre@nada.kth.se>.)

	* r4rs.scm (%load-verbosely): Reverted change to
 	`module-defined?', since the module system isn't bootstrapped when
 	we load r4rs.scm.  This is just a temporary fix to make the
	repository version runnable.

Thu Feb 27 23:25:47 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm: Removed the enabling of debug evaluator and
 	recording of source code positions.  This was placed there for our
 	convenience, but it has already sneaked into the distribution
 	once... so we'd better add this in our local copies instead when
 	we need it.  (These options are normally enabled at the end of
	boot-9.scm when loading the debug module.)

Thu Feb 27 16:04:45 1997  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (module-defined?): New function.
	(macroexpand-1, macroexpand): Use local-ref instead of defined?
 	and eval.
	* r4rs.scm (%load-verbosely): Use "module-defined?" instead of
 	"defined?".
	* slib.scm (defined?): New function to take the place of the
 	builtin "defined?".  It allways examines the slib module.

Mon Feb 24 21:46:15 1997  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* configure.in: Added AM_MAINTAINER_MODE

Sat Feb 15 04:51:20 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (read-sharp): define directly, don't go through a
	%read-sharp layer.

Tue Feb 11 08:45:48 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (uniform-vector-set!): use uniform-array-set1!, not
	uniform-vector-set1! which doesn't exist.

Mon Feb 10 03:01:48 1997  Mikael Djurfeldt  <mdj@kenneth>

	* boot-9.scm (backtrace): Removed.  (A C version now exists in
	backtrace.c.)

Fri Jan 24 06:05:36 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (read-line!, read-delimited!, read-delimited,
	read-line): new	procedures, see libguile/ChangeLog.

Thu Jan 16 17:07:03 1997  Marius Vollmer  <mvo@zagadka.ping.de>

	Added dynamic linking of modules. See libguile/DYNAMIC-LINKING.

	* boot-9.scm (split-c-module-name, convert-c-registered-modules,
 	init-dynamic-module, dynamic-maybe-call,
 	find-and-link-dynamic-module, link-dynamic-module,
 	try-module-dynamic-link, registered-modules): New definitions for
 	dynamic linking of modules.
	(resolve-module): Try to dynamically link the requested module
 	after failing to load it as Scheme code.

Wed Jan  8 05:50:14 1997  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (getservbyport, getservbyname): remove stray %.

Tue Jan  7 20:02:24 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm (and=>): Rename THUNK argument to PROCEDURE, 'cos
	that's what it is.

	* lineio.scm (make-line-buffering-input-port): Properly test for
	the case of an empty buffer list.  The old code assumed that '()
	was false.

Mon Jan  6 01:13:53 1997  Mikael Djurfeldt  <mdj@kenneth>

	* boot-9.scm (use-modules): New macro (from Marius Vollmer).
	(use-modules <module name> ...) Put the the modules named by
 	<module name> ... on the use list of the current module.

Sun Jan  5 15:52:59 1997  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm (error-catching-loop): Remove message saying that
	typing "$" will put you in the debugger.  This isn't implemented
	yet.

Sun Dec 22 23:27:25 1996  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm (delq-all!): Function deleted; delq!'s semantics have
	been fixed, so this function is superfluous.
	(transform-usage-lambda): Use delq!, not delq-all!.

Tue Dec 17 20:36:45 1996  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (resolve-module): New optional parameter that
 	controls whether autoloading is attempted or not. Default is #t.
	(process-define-module): Don't autoload the defined module.
	(try-module-autoload): Don't autoload the directory modules.

	* boot-9.scm (process-define-module): Ensure that the-scm-module
 	is last in the `uses' list to allow shadowing builtin
 	bindings. All :use-module options are added in the order they
 	appear in the arguments but before anything already on the list
 	(such as the-scm-module).

Wed Dec 11 21:06:05 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* slib.scm (slib-parent-dir): throw error if #f returned from
 	%search-load-path.

Sat Nov 30 23:57:28 1996  Tom Tromey  <tromey@cygnus.com>

	* PLUGIN/greet, PLUGIN/split.sed, PLUGIN/this.configure: Removed.
	* Makefile.am, aclocal.m4: New files.
	* configure.in: Updated for Automake.

Wed Nov 27 14:16:14 1996  Marius Vollmer  <mvo@zagadka.ping.de>

	* boot-9.scm (macroexpand-1, macroexpand), slib.scm
 	(slib:features), r4rs.scm (%load-verbosely): "defined?" is now a
 	function, use it accordingly.
	
Thu Nov 21 11:12:10 1996  Jim Blandy  <jimb@floss.cyclic.com>

	It's an "eval closure", not an "eval thunk."  A thunk is a
	function of no arguments.
	* boot-9.scm (module-type): Rename module field.
	(make-module, eval-in-module, make-root-module,
	set-current-module): Uses changed. 
	(module-eval-closure, set-module-eval-closure!,
	root-module-closure): Renamed from module-eval-thunk,
	set-module-eval-thunk!, root-module-thunk.
	(set-current-module): Change uses of *top-level-lookup-thunk* to
	*top-level-eval-closure*.

Wed Nov 20 14:45:27 1996  Jim Blandy  <jimb@totoro.cyclic.com>

	* slib.scm (slib-parent-dir): Use string-length, not length.
	(Thanks to Bernard Urban.)

Sat Nov  2 20:00:42 1996  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm: The debugging evaluator and recording of positions
	aren't enabled by default any longer (they are switched on in
	debug.scm).  But during development we want to have them also
	*inside* boot-9.scm.  Therefore, two lines are added at the
	beginning of boot-9.scm to enable these.
	
	Call `provide' so that `records' are included among the
 	`*features*'.
	
	The scheme for saving the stack has been adjusted: save-stack is
	now commonly available for saving the stack.  Calling `save-stack'
	sets a flag `stack-saved?' which prevents overwriting the stack.
	`stack-saved?' is reset at `abort'.
	
	Spelling correction: seperate --> separate.
	
	Removed `:'s that had creeped into some comments.
	
	The repl now doesn't print #<unspecified> results any longer
	If the user wants to see this, he can do
	(assert-repl-print-unspecified #t) in his startup file.
	
	The user now gets a friendly message instead of a backtrace at
	error.
	
	Added `before-read-hook'.
	
	Load module (ice-9 emacs) if option `-e' was specified.
	
	(provide): New function.
	
	(error): Save stack at entry, so that Guile entrails won't show up
	in backtraces.
	
	(backtrace): New function.
	
	(save-stack): Can now take arbitrary number of stack narrowing
	specifier pairs.  The first specifier in a pair controls inner
	border, the second the outer border.  A number means cut that
	number of frames, a procedure object means cut until that object
	is found in operator position in a frame.

	* debug.scm: Enable debugging evaluator and recording of positions
	by default.

	* slib.scm (slib:load): Adapt to the new behavior of
	primitive-load: It doesn't any longer try both with and without
	".scm" extension.  (We don't want to use %search-load-path here.)
	
	(implementation-vicinity): New function.  slib requires it
	
	(library-vicinity): Updated.
	
	Load "require.scm" in the library-vicinity.
	
	(install-require-vicinity, install-require-module): New functions.
	
Mon Oct 28 17:56:29 1996  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm (load-from-path): New function.

	* boot-9.scm (try-load, basic-try-load, try-load-module,
	try-load): Deleted.  I don't think they're being used.

	* Makefile.in (scm_files): Add r4rs.scm and test.scm to this list,
	so they'll get distributed.

	Get Guile to be a little less chatty by default.  The new user
	should see as little clutter as possible.
	* r4rs.scm (%load-verbosely): Make this #f by default.
	* boot-9.scm (scm-repl-verbose): Make this #f by default.
	(scm-style-repl): Don't run 'pk' on the value passed to quit.

	* r4rs.scm: New file.
	* boot-9.scm: Load r4rs.scm, first thing.
	(OPEN_READ, OPEN_WRITE, OPEN_BOTH, *null-device*, open-input-file,
 	open-output-file, open-io-file, close-input-port,
 	close-output-port, close-io-port, call-with-input-file,
 	call-with-output-file, with-input-from-port, with-output-to-port,
 	with-error-to-port, with-input-from-file, with-output-to-file,
 	with-error-to-file, with-input-from-string, with-output-to-string,
 	with-error-to-string, the-eof-object): Definitions moved to
	r4rs.scm.  Not all of them are R4RS, but those that are use those
	that are not.
	(load, %load-verbosely, %load-announce): Moved, along with code to
	set %load-hook, to r4rs.scm.

	* test.scm: New file.

	* boot-9.scm (integer?): Definition deleted, in favor of the one
	present in libguile (which used to be called int?).  I have no
	idea why integer? didn't just call int? to begin with.

	* boot-9.scm (<, <=, =, >, >=): Definitions in terms of <?, <=?,
	=?, >?, and >=? deleted; they're defined that way by libguile now.

	* boot-9.scm (load): Simplified; primitive-load does most of this
 	work now.
	(%load-announce-win): Removed; no longer used.  Set %load-hook to
 	call %load-announce.

Sun Oct 27 07:47:03 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (stat:dev, stat:ino, stat:mode, stat:nlink, stat:uid,
	stat:gid, stat:rdev, stat:size, stat:atime, stat:mtime,
	stat:ctime, stat:blksize, stat:blocks) accessor functions for stat
	components.
	(file-is-directory?): use stat:type.

Fri Oct 25 03:34:47 1996  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm (%read-sharp): Don't recognize the `#!' syntax here;
	that's now taken care of in libguile, and in a way compatible with
	SCSH (which this isn't).

Mon Oct 21 18:52:36 1996  Jim Blandy  <jimb@totoro.cyclic.com>

	* boot-9.scm: Formatting tweaks.

Fri Oct 18 01:03:08 1996  Mikael Djurfeldt  <mdj@mdj.nada.kth.se>

	* boot-9.scm (handle-system-error): Added hooks before-error-hook,
 	after-error-hook, before-backtrace-hook and after-backtrace-hook
 	to the error handler.  E.g.: fancy emacs support could plug into
 	these.
	(save-stack): New function.  The stack is now made differently
 	depending on the stack id.  (The motivation is to make a better
 	choice regarding what stack frames to present to the user.)
	(error-catching-loop): Stack handling code moved outside into
 	save-stack.

Thu Oct 17 20:33:08 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* Makefile.in (scm_files): add expect.scm.

	* expect.scm: new file ported from guile-iii.

	* boot-9.scm: remove handle-system-error, after moving the code into
	error-catching-loop.
	Don't set 'throw-handler-default property on error keys.
	Just interpret (almost) any throw with 4 args as an error throw.
	Delete some try-load stuff that was already commented out.

	Second thoughts, keep handle-system-error but call it from
	error-catching-loop.

Tue Oct 15 17:07:20 1996  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm: Doc fixes.
	(make-module): Rework for readability.
	(make-root-module, make-scm-module): USES argument to make-module
 	should be '(), not #f.

	* boot-9.scm (try-load): %sys-load-path has been renamed to
	primitive-load-path; adjust call here.

Tue Oct 15 14:25:01 1996  Mikael Djurfeldt  <mdj@woody.nada.kth.se>

	* boot-9.scm (signal-handler): Bugfix: Moved the recording of
 	the stack to the correct place: when it is decided to generate an
	error-signal.

Mon Oct 14 22:20:30 1996  Mikael Djurfeldt  <mdj@woody.nada.kth.se>

	* boot-9.scm (error-catching-loop, signal-handler,
 	handle-system-error): Backtracing now works for signals aswell;
 	Backtracing mechanism can now identify the stack root created by
 	start-stack so that the user isn't exposed to system stack frames.

Mon Oct 14 06:05:42 1996  Mikael Djurfeldt  <mdj@woody.nada.kth.se>

	* Makefile.in: Added threads.scm.
	
Mon Oct 14 04:21:51 1996  Mikael Djurfeldt  <mdj@woody.nada.kth.se>

	* debug.scm (make-enable, make-disable): Simplified.

	* boot-9.scm: Renamed %%throw-handler-default -->
 	throw-handler-default.
	((handle-system-error key . arg-list)): Changed the way errors are
	reported.
	((scm-style-repl)): Wrap up the call to eval in a start-stack
 	acro.
	((error-catching-loop thunk)): Introduce a lazy-catch into
 	error-catching-loop so that the stack can be captured.

Thu Oct 10 22:27:32 1996  Jim Blandy  <jimb@totoro.cyclic.com>

	* mapping.scm (hash-table-mapping): Explicitly request that
 	make-vector fill new vectors with '(); this will make it easier to
	port Guile Scheme code to other Schemes.
	* boot-9.scm (make-print-style, make-print-table): Same.

Sun Oct  6 03:54:59 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (load): rewritten again.
	Append "." to the default %load-path.
	(feature?): new function: checks for a symbol in the features list.
	(module-local-variable): remove apparently useless (caddr (list m v
	...))
	(%load-announce): minor formatting change.
	(file-exists?): use access? if posix is featured.
	(file-is-directory?): use stat if i/o-extensions is featured.
	(try-module-autoload module-name): use file-exists? before 
	file-is-directory?

Sat Oct  5 18:54:03 1996  Mikael Djurfeldt  <mdj@kenneth>

	* boot-9.scm: Added conditional loading of threads.scm.

	* threads.scm: New file.  Modified from the Cygnus-r0.3
	distribution.

	* boot-9.scm (error-catching-loop): Added handling of key
	`switch-repl'.

	* boot-9.scm: Name change %%bad-throw --> bad-throw.

Wed Oct  2 23:38:44 1996  Jim Blandy  <jimb@totoro.cyclic.com>

	* boot-9.scm (make-record-type, record-constructor): Don't assume
	the empty list is false when parsing the argument list.

Mon Sep 30 22:15:50 1996  Jim Blandy  <jimb@totoro.cyclic.com>

	* boot-9.scm (signal-handler): Clean up logic.

	* boot-9.scm (load): Assume %load-path is always bound.

Sat Sep 28 00:15:37 1996  Gary Houston  <ghouston@actrix.gen.nz>

 	* boot-9.scm (error): replace another throw with scm-error.  Throw
 	to 'misc-error instead of 'error (no need to distinguish these.)
	Don't set up 'error as a key.
	Set up regex-error as a key, if regex is available.
	(signal-handler): use scm-error, not throw.

	(%try-load, try-load-with-path, %load, load-with-path,
	basic-try-load-with-path, basic-load-with-path,
	try-load-module-with-path,load-module-with-path): deleted, since
	they seem redundant.
	(try-load): define using %try-load, not try-load-with-path.
	(load): rewritten.  load tries to open the file directly and
	with a .scm extension before searching the library directories
	(should "." be added to %load-path?  then load could still open
 	directly files starting with "/").
	(try-module-autoload): use load, not load-with-path.
	(%load-indent): deleted, -2 was causing errors.

	(%read-sharp): use port-line, not line-number.

Fri Sep 27 16:23:51 1996  Jim Blandy  <jimb@totoro.cyclic.com>

	* boot-9.scm (%%bad-throw): Delete definition. 1) It's very
 	straightforward to provide the equivalent functionality using
 	(catch #t ...), so there's no need for the extra complexity.  2)
 	Outside the context of a read-eval-print loop (which Guile should
 	not require) it's not clear we should do anything more complicated
 	than print an error and exit; the user or REPL can establish
 	something better if it wants.  3) In that case, it's much more
 	robust to just do it in the C code.

Tue Sep 24 06:53:04 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (%try-load): define using primitive-load.  Previously
	%try-load itself was the primitive.
	(load-with-path): use scm-error instead of %load-announce-lossage.
	Errors are thrown to 'misc-error instead of 'could-not-load.
	(%load-announce-lossage): deleted.

Mon Sep 23 00:16:31 1996  Mikael Djurfeldt  <mdj@kenneth>

	* boot-9.scm (warn, scm-style-repl): Use C printer instead of `print'.
	(make-record-type type-name fields): Temporarily remove support
	for printing of records (not possible yet with C printer).

Fri Sep 20 00:24:27 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (file-exists?, file-is-directory): catch only
	system-error, not every kind of error.
	(scm-error): new procedure.

Thu Sep 19 16:02:46 1996  Jim Blandy  <jimb@totoro.cyclic.com>

	* boot-9.scm: Formatting tweaks.

Wed Sep 18 09:07:37 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (%%handle-system-error key): remove the code for
	SCM-style errors.  handle the case that an unexpected number
	of args are supplied.
	(%%system-errors): removed.
	(error): redefine using a throw with key and 4 args.
	('error): associate 'error, 'error-signal keys with
	%%handle-system-error.
	(%%default-error-handler): removed.
	(signal-handler): throw with 4 args and use the error-signal key.
	Create an error message instead of using numerical codes.
	(%%bad-throw): call error instead of throw if key not found.

Tue Sep 17 04:11:28 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm: initialize new error keys (see libguile/ChangeLog).
	(%%handle-system-error key): check subr is not #f before printing.
	Recognize %s (embed an argument using "display") and
	%S (embed an argument using "write").

Sun Sep 15 03:55:35 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (%%handle-system-error key): set args and rest to
	the empty list if they are #f.
	Initialize out-of-range as an error key.

Sat Sep 14 03:41:15 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* PLUGIN/REQ: remove the "ice-9 lgh" line which causes a cycle.

	* boot-9.scm: remove leading %% from references to '%%system-error.
	(%%handle-system-error): don't pass all the thrown arguments when
	aborting, just the key and subr.
	Remove the code to "Install default handlers for built-in errors."
	Remove the definition of the syserror procedure.
	Associate 'numerical-overflow with default handler.

Fri Sep 13 04:58:11 1996  Mikael Djurfeldt  <mdj@woody.nada.kth.se>

	* boot-9.scm: Name change: value-ref --> local-ref
	resolved-ref --> nested-ref  Motivation: conformance to the other
	dictionary operators: list-ref operates on list, vector-ref
	operates on vector, nested-ref operates on nested namespace,
	local-ref operates on the local nested namespace.

Sat Sep  7 06:44:47 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (%%handle-system-error): recognise errors thrown
	by lgh-error (fill-message etc.)
	(fill-message): check first whether args is null.
	(fill-message): bug fix and check that args is a list.

Thu Sep  5 11:33:41 1996  Jim Blandy  <jimb@floss.cyclic.com>

	* boot-9.scm: %load-path is initialized in C code now.
	(implementation-vicinity, parse-path): Deleted, along with code to
	initialize %load-path.

	* boot-9.scm (in-vicinity): If the vicinity doesn't end with a
	"/", use one to separate it from the file.

Thu Aug 29 23:05:11 1996  Thomas Morgan  <tmorgan@gnu.ai.mit.edu>

	* boot-9.scm (%load-path): Add the site directory.
	Add the directory named after the version number.
	Prepend the version number to the other directories in the path.
	Simplify by mapping the common prefix onto each item.
	* Makefile.in (datadir, pkgdatadir, pkgverdatadir, subpkgdatadir,
	sitedatadir): New definitions.
	(libparent, libdir, install_path): Replaced by above.
	(install): Create the above directories.
	Put the source files into subpkgdatadir.
	(uninstall): Remove the above directories.

Thu Aug 29 21:48:47 1996  Jim Blandy  <jimb@floss.cyclic.com>

	Don't use the PLUGIN system to gather information for the
	Makefile's distribution and installation targets; just put it all
	in the Makefile directly.
	* PLUGIN/this.configure (scm_files, aux_files): Remove sections
	for these.
	* configure.in: Remove code that gets and substitutes scm_files and
	aux_files.
	* Makefile.in (scm_files, aux_files): Write out the list of files
	here, where people expect to find them.

Fri Aug 23 06:44:36 1996  Mikael Djurfeldt  <mdj@woody.nada.kth.se>

	* boot-9.scm: Preliminary solution: optionally load the debug
	module.  Changed "gls" to "guile1.0b3".

	* debug.scm: New file: debug extensions.

Wed Aug 21 13:06:56 1996  Mikael Djurfeldt  <mdj@woody.nada.kth.se>

	* boot-9.scm (print-vector): Renamed weak-hash-table? -->
 	weak-key-hash-table?.  (Again!)

Tue Aug 20 07:31:39 1996  Mikael Djurfeldt  <mdj@woody.nada.kth.se>

	* boot-9.scm (print-vector, macro-table, xformer-table):
	Renamed weak-hash-table --> weak-key-hash-table.

	* poe.scm (funcq-memo): Renamed weak-hash-table -->
	weak-key-hash-table.
	
Sat Aug  3 06:16:35 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (*null-device*): global constant from goonix.
	(move->fdes): adjusted for boolean primitive-move->fdes.  return
	the modified port, always set revealed count to 1 (SCSH compatible).
	(release-port-handle port): from goonix (SCSH compatible).
	(%open-file): removed.
	(open-input-file, open-output-file, file-exists?, file-is-directory?):
	modified for open-file change (does not return #f).

Thu Aug  1 02:52:42 1996  Jim Blandy  <jimb@totoro.cyclic.com>

	* Makefile.in (dist-dir): New target for new dist system.
	(manifest): Deleted.
	* PLUGIN/this.configure (aux_files): Removed PLUGIN; it's a
	directory, and needs special treatment in the dist-dir target.

Thu Aug  1 09:00:21 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm: remove the wrappers for '%' system primitives,
	now that they throw errors directly.
	remove make-simple-wrapper and similar functions.
	protect a call to getenv which may now throw an exception.

Wed Jul 31 23:44:42 1996  Gary Houston  <ghouston@actrix.gen.nz>

	* boot-9.scm (false-if-exception): new macro.

Fri Apr 19 13:53:08 1996  Tom Lord  <lord@beehive>

	* The more things change...


