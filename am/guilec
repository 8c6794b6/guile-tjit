# -*- makefile -*-
GOBJECTS = $(SOURCES:%.scm=%.go)

moddir = $(pkgdatadir)/$(GUILE_EFFECTIVE_VERSION)/$(modpath)
nobase_mod_DATA = $(SOURCES) $(NOCOMP_SOURCES) $(GOBJECTS)
EXTRA_DIST = $(SOURCES) $(NOCOMP_SOURCES)

CLEANFILES = $(GOBJECTS)

SUFFIXES = .scm .go
.scm.go:
	$(MKDIR_P) `dirname $@`
	$(top_builddir)/meta/guile 					\
	  -l $(top_builddir)/libguile/stack-limit-calibration.scm	\
	  $(top_srcdir)/scripts/compile -o "$@" "$<"
