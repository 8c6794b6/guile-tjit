#! /bin/sh

# ltconfig - Create a system-specific libtool.
# Generated automatically from ltconfig.in by configure.
# Copyright (C) 1996, Free Software Foundation, Inc.
# Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996
#
# This file is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
#
# As a special exception to the GNU General Public License, if you
# distribute this file as part of a program that contains a
# configuration script generated by Autoconf, you may include it under
# the same distribution terms that you use for the rest of that program.

# A lot of this script is taken from autoconf-2.10.

# The name of this program.
progname=`echo "$0" | sed 's%^.*/%%'`

# Constants:
PROGRAM=ltconfig
PACKAGE=libtool
VERSION=0.7
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.c 1>&5'
rm="rm -f"

help="Try \`$progname --help' for more information."

# Global variables:
enable_shared=yes
# All known linkers require a `.a' archive for static linking.
enable_static=yes
ltmain=NONE
silent=
srcdir=
ac_config_guess=
ac_config_sub=
host=NONE
nonopt=NONE
verify_host=yes
with_gcc=no

old_CC="$CC"
old_CFLAGS="$CFLAGS"
old_CPPFLAGS="$CPPFLAGS"
old_LD="$LD"
old_RANLIB="$RANLIB"

# Parse the command line options.
args=
prev=
for option
do
  case "$option" in
  -*=*) optarg=`echo "$option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) optarg= ;;
  esac

  # If the previous option needs an argument, assign it.
  if test -n "$prev"; then
    eval "$prev=\$option"
    prev=
    continue
  fi

  case "$option" in
  --help) cat <<EOM
Usage: $progname [OPTION]... LTMAIN [HOST]

Generate a system-specific libtool script.

    --disable-shared       do not build shared libraries
    --help                 display this help and exit
    --no-verify            do not verify that HOST is a valid host type
    --quiet                same as \`--silent'
    --silent               don't print informational messages
    --srcdir=DIR           find \`config.guess' in DIR
    --version              output version information and exit
    --with-gcc             assume that the GNU C compiler will be used

LTMAIN is the \`ltmain.sh' shell script fragment that provides basic libtool
functionality.

HOST is the canonical host system name [default=guessed].
EOM
  exit 0
  ;;

  --disable-shared) enable_shared=no ;;

  --quiet | --silent) silent=yes ;;

  --srcdir) prev=srcdir ;;
  --srcdir=*) srcdir="$optarg" ;;

  --no-verify) verify_host=no ;;

  --version) echo "$PROGRAM (GNU $PACKAGE) $VERSION"; exit 0 ;;

  --with-gcc) with_gcc=yes ;;

  -*)
    echo "$progname: unrecognized option \`$option'" 1>&2
    echo "$help" 1>&2
    exit 1
    ;;

  *)
    if test "$ltmain" = NONE; then
      ltmain="$option"
    elif test "$host" = NONE; then
# FIXME This generates an unnecessary warning for sparc-sun-solaris4.1.3_U1
#      if test -n "`echo $option| sed 's/[-a-z0-9.]//g'`"; then
#        echo "$progname: warning \`$option' is not a valid host type" 1>&2
#      fi
      host="$option"
    else
      echo "$progname: too many arguments" 1>&2
      echo "$help" 1>&2
      exit 1
    fi ;;
  esac
done

if test "$ltmain" = NONE; then
  echo "$progname: you must specify a LTMAIN file" 1>&2
  echo "$help" 1>&2
  exit 1
fi

if test -f "$ltmain"; then :
else
  echo "$progname: warning: \`$ltmain' does not exist" 1>&2
fi

# Quote any args containing shell metacharacters.
ltconfig_args=
for arg
do
  case "$arg" in
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ltconfig_args="$ltconfig_args '$arg'" ;;
  *) ltconfig_args="$ltconfig_args $arg" ;;
  esac
done

# A relevant subset of AC_INIT.

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 5 compiler messages saved in config.log
# 6 checking for... messages and results
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>>./config.log

# NLS nuisances.
# Only set LANG and LC_ALL to C if already set.
# These must not be set unconditionally because not all systems understand
# e.g. LANG=C (notably SCO).
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi

if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi

if test -z "$srcdir"; then
  # Assume the source directory is the same one as the path to ltmain.sh.
  srcdir=`echo "$ltmain" | sed 's%/[^/]*$%%'`
  test "$srcdir" = "$ltmain" && srcdir=.
fi

if test "$verify_host" = yes; then
  # Check for config.guess and config.sub.
  ac_aux_dir=
  for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
    if test -f $ac_dir/config.guess; then
      ac_aux_dir=$ac_dir
      break
    fi
  done
  if test -z "$ac_aux_dir"; then
    echo "$progname: cannot find config.guess in $srcdir $srcdir/.. $srcdir/../.." 1>&2
    echo "$help" 1>&2
    exit 1
  fi
  ac_config_guess=$ac_aux_dir/config.guess
  ac_config_sub=$ac_aux_dir/config.sub

  # Make sure we can run config.sub.
  if $ac_config_sub sun4 >/dev/null 2>&1; then :
  else
    echo "$progname: cannot run $ac_config_sub" 1>&2
    echo "$help" 1>&2
    exit 1
  fi

  echo $ac_n "checking host system type""... $ac_c" 1>&6

  host_alias=$host
  case "$host_alias" in
  NONE)
    if host_alias=`$ac_config_guess`; then :
    else
      echo "$progname: cannot guess host type; you must specify one" 1>&2
      echo "$help" 1>&2
      exit 1
    fi ;;
  esac
  host=`$ac_config_sub $host_alias`
  echo "$ac_t""$host" 1>&6

elif test "$host" = NONE; then
  echo "$progname: you must specify a host type if you use \`--no-verify'" 1>&2
  echo "$help" 1>&2
  exit 1
else   
  host_alias=$host
fi

host_cpu=`echo $host | sed 's/^\(.*\)-\(.*\)-\(.*\)$/\1/'`
host_vendor=`echo $host | sed 's/^\(.*\)-\(.*\)-\(.*\)$/\2/'`
host_os=`echo $host | sed 's/^\(.*\)-\(.*\)-\(.*\)$/\3/'`

# Determine commands to create old-style static archives.
old_archive_cmds='ar cru $oldlib$oldobjs'
old_postinstall_cmds='chmod 644 $oldlib'

# If RANLIB is not set, then run the test.
if test "${RANLIB+set}" != "set"; then
  result=no

  echo $ac_n "checking for ranlib... $ac_c" 1>&6
  if test "$result" = no; then
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/ranlib; then
	RANLIB="ranlib"
	result="ranlib"
	break
      fi
    done
    IFS="$save_ifs"
  fi

  echo $ac_t "$result" 1>&6
fi

if test -n "$RANLIB"; then
  old_archive_cmds="$old_archive_cmds;\$RANLIB \$oldlib"
  old_postinstall_cmds="$old_postinstall_cmds;\$RANLIB \$oldlib"
fi

# FIXME: this is simplistic, and doesn't allow for cross-compiling.
echo $ac_n "checking for library strip program... $ac_c" 1>&6
striplib=
if strip -x /dev/null 2>&1 | grep '/dev/null' >/dev/null 2>&1; then
  # strip: /dev/null: Inappropriate file type or format
  striplib="strip -x"
fi

if test -n "$striplib"; then
  echo $ac_t "$striplib" 1>&6
else
  echo $ac_t none 1>&6
fi


# Check if old-style libraries may be stripped.
old_striplib=
if test -n "$striplib"; then
  echo $ac_n "checking if $striplib works for static archives... $ac_c" 1>&6
  old_striplib="$striplib"
  trap 'rm -rf conftest*; exit 1' 1 2 15
  cat > conftest.c <<EOF
#line 305 "$progname"
int external_func() { return 1; }
static int hidden_func() { return 2; }
EOF
  if { (eval echo $progname:308: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    oldlib=conftest.a
    oldobjs=' conftest.o'

    # Do each of the archive commands.
    cmds=`eval echo \"$old_archive_cmds\"`
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS=';'
    for cmd in $cmds; do
      IFS="$save_ifs"
      if { (echo $progname:317: \"$cmd\") 1>&5; ($cmd) 2>&5; }; then :
      else
	old_striplib=
	break
      fi
    done
    IFS="$save_ifs"

    if test -n "$old_striplib"; then
      if { (echo $progname:326: \"$old_striplib conftest.a\") 1>&5; ($old_striplib conftest.a) 2>&5; }; then :
      else
	old_striplib=
      fi
    fi
  else
    old_striplib=
  fi
  rm -rf conftest*
  trap '' 1 2 15

  if test -n "$old_striplib"; then
    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
fi


# Check to see if we are using GCC.
if test "$with_gcc" = no; then
  # If CC is not set, then try to find GCC or a usable CC.
  if test -z "$CC"; then
    echo $ac_n "checking for gcc... $ac_c" 1>&6
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    for dir in $PATH; do
      IFS="$save_ifs"
      test -z "$dir" && dir=.
      if test -f $dir/gcc; then
	CC="gcc"
	break
      fi
    done
    IFS="$save_ifs"

    if test -n "$CC"; then
      echo "$ac_t""$CC" 1>&6
    else
      echo "$ac_t""no" 1>&6
    fi
  fi

  # Not "gcc", so try "cc", rejecting "/usr/ucb/cc".
  if test -z "$CC"; then
    echo $ac_n "checking for cc... $ac_c" 1>&6
    IFS="${IFS= 	}"; save_ifs="$IFS"; IFS="${IFS}:"
    cc_rejected=no
    for dir in $PATH; do
      test -z "$dir" && dir=.
      if test -f $dir/cc; then
	if test "$dir/cc" = "/usr/ucb/cc"; then
	  cc_rejected=yes
	  continue
	fi
	CC="cc"
	break
      fi
    done
    IFS="$save_ifs"
    if test $cc_rejected = yes; then
      # We found a bogon in the path, so make sure we never use it.
      set dummy $CC
      shift
      if test $# -gt 0; then
	# We chose a different compiler from the bogus one.
	# However, it has the same name, so the bogon will be chosen
	# first if we set CC to just the name; use the full file name.
	shift
	set dummy "$dir/cc" "$@"
	shift
	CC="$@"
      fi
    fi

    if test -n "$CC"; then
      echo "$ac_t""$CC" 1>&6
    else
      echo "$ac_t""no" 1>&6
    fi

    if test -z "$CC"; then
      echo "$progname: error: no acceptable cc found in \$PATH" 1>&2
      exit 1
    fi
  fi

  # Now see if the compiler is really GCC.
  with_gcc=no
  echo $ac_n "checking whether we are using GNU C... $ac_c" 1>&6

  trap "$rm conftest.c; exit 1" 1 2 15
  $rm conftest.c
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
  if eval "$CC -E conftest.c" | egrep yes >/dev/null 2>&1; then :
    with_gcc=yes
  fi
  $rm conftest.c
  echo $ac_t "$with_gcc" 1>&6
fi

# Allow CC to be a program name with arguments.
set dummy $CC
compiler="$2"

echo $ac_n "checking for $compiler option to produce PIC... $ac_c" 1>&6
pic_flag=
profile_flag_pattern=
wl=
link_static_flag=

if test "$with_gcc" = yes; then
  pic_flag='-fPIC'
  profile_flag_pattern='-pg?'
  wl='-Wl,'
  link_static_flag='-static'
else
  # PORTME Check for PIC flags for the system compiler.
  case "$host" in
  *-*-aix3* | *-*-aix4*)
    # FIXME All rs/6000 code is PIC, but is there any non-rs/6000 AIX platform?
    link_static_flag='-bnso -bI:/lib/syscalls.exp'
    ;;

  *-*-hpux10*)
    # FIXME link_static_flag?
    pic_flag='+Z'
    ;;

  *-*-osf3*)
    # FIXME - pic_flag, link_static_flag?
    ;;

  *-*-solaris2*)
    pic_flag='-KPIC'
    link_static_flag='-Bstatic'
    ;;

  *-*-sunos4*)
    pic_flag='-PIC'
    link_static_flag='-Bstatic'
    wl='-Qoption ld '
    ;;

  *)
    can_build_shared=no
    ;;
  esac
fi

case "$host" in
rs6000-*-*)
  # Yippee! All rs/6000 code is position-independent.
  pic_flag=
  ;;
esac

if test -n "$pic_flag"; then
  echo $ac_t "$pic_flag" 1>&6
  pic_flag=" $pic_flag"
else
  echo $ac_t none 1>&6
fi

echo $ac_n "checking for $compiler option to statically link programs... $ac_c" 1>&6
if test -n "$link_static_flag"; then
  echo $ac_t "$link_static_flag" 1>&6
else
  echo $ac_t none 1>&6
fi

# See if we're really using GNU ld.
test -z "$LD" && LD="ld"
with_gnu_ld=no
# Allow LD to be a program name with arguments.
set dummy $LD
linker="$2"
echo $ac_n "checking if $LD is GNU ld... $ac_c" 1>&6
if $LD --version 2>&1 | egrep 'with BFD' > /dev/null; then
  with_gnu_ld=yes
  linker="GNU ld"
fi
echo $ac_t "$with_gnu_ld" 1>&6

# See if the linker supports building shared libraries.
echo $ac_n "checking if $linker supports shared libraries... $ac_c" 1>&6

archive_cmds=
link_rpath_flag=
hardcode_minus_L=no
hardcode_shlibpath_var=no

ld_shlibs=yes
if test "$with_gnu_ld" = yes; then
  # See if GNU ld supports shared libraries.

  case "$host" in
  *-*-sunos4*)
    ld_shlibs=yes
    ;;

  *)
    if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then
      ld_shlibs=yes
    else
      ld_shlibs=no
    fi
    ;;
  esac

  if test "$ld_shlibs" = yes; then
    archive_cmds='$cc -shared ${wl}-soname $wl$soname -o $lib$libobjs$deplibs'
    link_rpath_flag='${wl}-rpath $wl$libdir'
  fi
else
  # PORTME fill in a description of your system's linker (not GNU ld)
  case "$host" in
  *-*-aix3*)
    archive_cmds='$rm $lib.exp;/ucb/nm$libobjs | egrep \" D \" | sed \"s/^.* //\" > $lib.exp;$LD -o $objdir/$soname$libobjs -bE:$lib.exp -T512 -H512 -bM:SRE -lc$deplibs;ar cru $lib $objdir/$soname'
    hardcode_shlibpath_var=yes
    hardcode_minus_L=yes
    ;;

  *-*-aix4*)
    archive_cmds='$rm $lib.exp;/bin/nm -B$libobjs | egrep \" D \" | sed \"s/^.* //\" > $lib.exp;$cc -o $objdir/$soname$libobjs ${wl}-bE:$lib.exp ${wl}-bM:SRE ${wl}-bnoentry$deplibs;ar cru $lib $objdir/$soname'
    hardcode_shlibpath_var=yes
    hardcode_minus_L=yes
    ;;

  *-*-freebsd*)
    archive_cmds='$LD -Bshareable -o $lib$libobjs$deplibs'
    hardcode_minus_L=yes
    ;;

  *-*-hpux10*)
    archive_cmds='$LD -b +h $soname +s +b $install_libdir -o $lib$libobjs$deplibs'
    link_rpath_flag='${wl}+b ${wl}$libdir'
    hardcode_minus_L=yes
    hardcode_shlibpath_var=yes
    ;;

  *-*-netbsd*)
    # Tested with NetBSD 1.2 ld
    archive_cmds='$LD -Bshareable -o $lib$libobjs$deplibs'
    link_rpath_flag='-R$libdir'
    ;;

  *-*-osf3*)
    archive_cmds='$LD -shared -o $lib -rpath $install_libdir -soname $soname -set_version $verstring$libobjs -lc$deplibs'
    link_rpath_flag='${wl}-rpath ${wl}$libdir'
    ;;

  *-*-solaris2*)
    archive_cmds='$LD -G -z text -h $soname -o $lib$libobjs$deplibs'
    link_rpath_flag='-R$libdir'
    ;;

  *-*-sunos4*)
    archive_cmds='$LD -assert pure-text -Bstatic -o $lib$libobjs$deplibs'
    link_rpath_flag='-L$libdir'
    hardcode_minus_L=yes
    ;;

  *)
    ld_shlibs=no
    can_build_shared=no
    ;;
  esac
fi
echo $ac_t "$ld_shlibs" 1>&6

if test "$hardcode_shlibpath_var" = yes && test "$hardcode_minus_L" = yes; then
  echo "$progname: warning: $LD needlessly hardcodes library paths into binaries" 1>&2
  echo "$PACKAGE will compensate by relinking binaries at install time." 1>&2
fi

reload_flag=
reload_cmds='$LD$reload_flag -o $output$reload_objs'
echo $ac_n "checking for $linker option to reload object files... $ac_c" 1>&6
# PORTME Some linker may need a different reload flag.
reload_flag='-r'
echo $ac_t "$reload_flag"
test -n "$reload_flag" && reload_flag=" $reload_flag"

# PORTME Fill in your ld.so characteristics
can_build_shared=yes
lib_names=
soname_spec=
postinstall_cmds=
finish_cmds=
shlibpath_var=
version_type=none
dynamic_linker="$host_os ld.so"

echo $ac_n "checking dynamic linker characteristics... $ac_c" 1>&6
case "$host" in
*-*-aix3* | *-*-aix4*)
  # Shared libraries and static libraries currently use the same namespace.
  test "$enable_shared" = no || enable_static=no

  version_type=linux
  lib_names='$libname.so.$versuffix $libname.a'
  shlibpath_var=LIBPATH

  # AIX has no versioning support, so we append a major version to the name.
  soname_spec='$libname.so.$major'
  ;;

*-*-freebsd*)
  version_type=sunos
  lib_names='$libname.so.$versuffix $libname.so'
  finish_cmds='ldconfig -m $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*-*-gnu*)
  version_type=sunos
  lib_names='$libname.so.$versuffix'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*-*-hpux10*)
  # Give a soname corresponding to the major version so that dld.sl refuses to
  # link against other versions.
  dynamic_linker="$host_os dld.sl"
  version_type=sunos
  shlibpath_var=SHLIB_PATH
  lib_names='$libname.sl.$versuffix $libname.sl.$major $libname.sl'
  soname_spec='$libname.sl.$major'
  # HP-UX runs *really* slowly unless shared libraries are mode 555.
  postinstall_cmds='chmod 555 $lib'
  ;;

# No shared lib support for linuxoldld or linuxaout.
*-*-linuxoldld* | *-*-linuxaout*)
  dynamic_linker=no
  can_build_shared=no
  ;;

*-*-linux*)
  version_type=linux
  lib_names='$libname.so.$versuffix $libname.so.$major $libname.so'
  soname_spec='$libname.so.$major'
  finish_cmds='ldconfig -n $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*-*-netbsd*)
  version_type=sunos
  lib_names='$libname.so.$versuffix'
  finish_cmds='ldconfig -m $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*-*-osf3*)
  version_type=osf
  soname_spec='$libname.so'
  lib_names='$libname.so.$versuffix $libname.so'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*-*-solaris2*)
  version_type=linux
  lib_names='$libname.so.$versuffix $libname.so.$major $libname.so'
  soname_spec='$libname.so.$major'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*-*-sunos4*)
  version_type=sunos
  lib_names='$libname.so.$versuffix'
  finish_cmds='ldconfig $libdir'
  shlibpath_var=LD_LIBRARY_PATH
  ;;

*)
  dynamic_linker=no
  can_build_shared=no
  ;;
esac
echo "$ac_t""$dynamic_linker"


# Report the consequences.
echo "checking if libtool supports shared libraries... $can_build_shared" 1>&6

echo $ac_n "checking whether to build shared libraries... $ac_c" 1>&6
test "$can_build_shared" = "no" && enable_shared=no

if test "$enable_shared" = yes; then
  # On AIX, we do not build both static and shared libraries.
  case "$host_os" in
  aix*)
    test "$enable_static" = yes && enable_static=no
    if test -n "$RANLIB"; then
      archive_cmds="$archive_cmds;\$RANLIB \$lib"
      postinstall_cmds='$RANLIB $lib'
    fi
    ;;
  esac
fi

echo "$ac_t""$enable_shared" 1>&6


ofile=libtool
trap "$rm $ofile; exit 1" 1 2 15
echo creating $ofile
rm -fr $ofile
cat <<EOF > $ofile
#! /bin/sh

# libtool - Provide generalized library-building support services.
#
# Generated automatically by $PROGRAM - GNU $PACKAGE $VERSION
# This program was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# CC="$old_CC" CFLAGS="$old_CFLAGS" LD="$old_LD" RANLIB="$old_RANLIB" \\
#   $0$ltconfig_args
#
# Compiler and other test output produced by $progname, useful for
# debugging $progname, is in ./config.log if it exists.

# The version of $progname that generated this script.
LTCONFIG_VERSION="$VERSION"

# Whether or not to build libtool libraries.
build_libtool_libs=$enable_shared

# Whether or not to build old-style libraries.
build_old_libs=$enable_static

# The host system.
host_alias="$host_alias"
host="$host"

# The linker used to build libraries.
LD='$LD'

# How to create reloadable object files.
reload_flag='$reload_flag'
reload_cmds='$reload_cmds'

# How to pass a linker flag through the compiler.
wl='$wl'

# Additional compiler flags for building library objects.
pic_flag='$pic_flag'

# Compiler flag to prevent dynamic linking.
link_static_flag='$link_static_flag'

# Pattern to match compiler flags for creating libNAME_p libraries:
profile_flag_pattern='$profile_flag_pattern'

# Library versioning type.
version_type=$version_type

# List of archive names.  First name is the real one, the rest are links.
lib_names='$lib_names'

# The coded name of the library, if different from the real name.
soname_spec='$soname_spec'

# Commands used to build and install an old-style archive.
RANLIB='$RANLIB'
old_archive_cmds='$old_archive_cmds'
old_postinstall_cmds='$old_postinstall_cmds'

# Commands used to build and install a shared archive.
archive_cmds='$archive_cmds'
postinstall_cmds='$postinstall_cmds'

# Commands used to finish a libtool library installation in a directory.
finish_cmds='$finish_cmds'

# The flag that specifies a runtime search path when linking.
link_rpath_flag='$link_rpath_flag'

# How to strip a library file.
striplib='$striplib'
old_striplib='$old_striplib'

# This is the shared library path variable.
shlibpath_var=$shlibpath_var

# Set to yes if using SHLIBPATH_VAR=DIR during linking hardcodes DIR into the
# the resulting binary.
hardcode_shlibpath_var=$hardcode_shlibpath_var

# Set to yes if using the -LDIR flag during linking hardcodes DIR into the
# resulting binary.
hardcode_minus_L=$hardcode_minus_L

EOF

# Detect if we are using a relative or absolute path to ltmain.sh.
case "$ltmain" in
/*) cat <<EOF2 >> $ofile
# Execute the libtool backend.
. $ltmain
EOF2
  ;;
*) cat <<EOF3 >> $ofile
# Find the path to this script.
thisdir=\`echo "\$0" | sed -e 's%/[^/]*\$%%'\`
test "X\$0" = "X\$thisdir" && thisdir=.

# Execute the libtool backend.
. \$thisdir/$ltmain
EOF3
  ;;
esac

echo 'exit 1' >> $ofile

chmod +x $ofile
exit 0

# Local Variables:
# mode:shell-script
# sh-indentation:2
# End:
